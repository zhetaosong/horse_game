<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ğŸ é©¬å¹´èµ›é©¬ Â· å¹´ä¼šå°æ¸¸æˆ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: "Microsoft YaHei", sans-serif;
    background: linear-gradient(#8b1e1e, #c94a4a);
    color: #fff;
    text-align: center;
}

h1 {
    margin: 20px 0;
}

input, button {
    font-size: 16px;
    padding: 10px;
    margin: 6px;
    border-radius: 6px;
    border: none;
}

button {
    background: gold;
    cursor: pointer;
}

.track {
    width: 90%;
    max-width: 600px;
    height: 40px;
    background: #4a2a2a;
    margin: 20px auto;
    border-radius: 20px;
    position: relative;
}

.horse {
    position: absolute;
    left: 0;
    top: 4px;
    font-size: 24px;
    transition: left 0.05s linear;
}

.finish {
    position: absolute;
    right: 10px;
    top: 0;
    bottom: 0;
    width: 4px;
    background: gold;
}

.rank {
    background: rgba(0,0,0,0.3);
    margin: 20px auto;
    padding: 15px;
    border-radius: 10px;
    width: 90%;
    max-width: 600px;
}
</style>
</head>

<body>

<h1>ğŸ é©¬å¹´èµ›é©¬ Â· ç–¯ç‹‚ç‚¹ï¼</h1>

<div>
    <input id="nameInput" placeholder="è¾“å…¥ä½ çš„åå­—">
    <button onclick="startRace()">å¼€å§‹æ¯”èµ›</button>
</div>

<div class="track" id="track">
    <div class="horse" id="horse">ğŸ</div>
    <div class="finish"></div>
</div>

<button onclick="run()">ç–¯ç‹‚ç‚¹æˆ‘åŠ é€Ÿï¼</button>

<div class="rank">
    <h2>ğŸ† æ’åï¼ˆæŒ‰ç»ˆç‚¹æ—¶é—´ï¼‰</h2>
    <ol id="rankList"></ol>
</div>

<script>
const TOTAL_DISTANCE = 1000;   // å›ºå®šèµ›ç¨‹
const STEP = 20;              // æ¯æ¬¡ç‚¹å‡»å‰è¿›è·ç¦»

let distance = 0;
let startTime = 0;
let finished = false;

// æ‰€æœ‰ç©å®¶æˆç»©ï¼ˆæœ¬é¡µé¢ï¼‰
const results = [];

function startRace() {
    const name = document.getElementById("nameInput").value.trim();
    if (!name) {
        alert("è¯·è¾“å…¥åå­—");
        return;
    }

    distance = 0;
    finished = false;
    startTime = Date.now();
    document.getElementById("horse").style.left = "0px";
}

function run() {
    if (finished || !startTime) return;

    distance += STEP;

    const trackWidth = document.getElementById("track").clientWidth - 60;
    const percent = Math.min(distance / TOTAL_DISTANCE, 1);
    document.getElementById("horse").style.left = (trackWidth * percent) + "px";

    if (distance >= TOTAL_DISTANCE) {
        finished = true;
        const timeUsed = (Date.now() - startTime) / 1000;

        results.push({
            name: document.getElementById("nameInput").value,
            time: timeUsed
        });

        updateRank();
    }
}

function updateRank() {
    results.sort((a, b) => a.time - b.time);

    const list = document.getElementById("rankList");
    list.innerHTML = "";

    results.forEach((r, i) => {
        const li = document.createElement("li");
        li.textContent = `${r.name} â€”â€” ${r.time.toFixed(2)} ç§’`;
        list.appendChild(li);
    });
}
</script>

</body>
</html>
